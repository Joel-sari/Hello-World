<div id="pinModal" class="modal hidden">
  <div class="modal-content">
    <div class="form-header">
      <div class="form-title">Drop a new pin üåç</div>
      <div class="form-subtitle">
        Capture a moment from your journey ‚Äî add a photo, caption, and location.
      </div>
    </div>

    <!-- REQUIRED: method="POST" & correct field names -->
    <form id="pinForm" method="POST" enctype="multipart/form-data">
      {% csrf_token %}

      <!-- Country -->
      <div class="field-group">
        <label for="countryInput">Country</label>
        <input
          id="countryInput"
          type="text"
          name="country"
          placeholder="United States"
          required
        />
      </div>

      <!-- State -->
      <div class="field-group">
        <label for="stateInput">State / Region (optional)</label>
        <input
          id="stateInput"
          type="text"
          name="state"
          placeholder="Georgia"
        />
      </div>

      <!-- City -->
      <div class="field-group">
        <label for="cityInput">City</label>
        <input
          id="cityInput"
          type="text"
          name="city"
          placeholder="Atlanta"
          required
        />
      </div>

      <!-- Caption -->
      <div class="field-group">
        <label for="captionInput">Caption</label>
        <input
          id="captionInput"
          type="text"
          name="caption"
          maxlength="280"
          placeholder="Trip with friends üëã"
        />
      </div>

      <!-- Existing photos (edit mode only, JS fills this) -->
      <div class="field-group" id="existingPhotos"
           style="display:flex; flex-wrap:wrap; gap:8px; margin-top:6px;">
      </div>

      <!-- Hidden list of photo IDs to delete -->
      <input type="hidden" id="photosToDelete" name="photos_to_delete" />

      <!-- Upload NEW photos -->
      <div class="field-group">
        <label for="photosInput">
          Photos
          <span style="font-weight:400; font-size:0.75rem; color:#9ca3af;">
            (add one or many)
          </span>
        </label>

        <input
          id="photosInput"
          type="file"
          name="photos"
          accept="image/*"
          multiple
        />

        <small style="font-size: 0.75rem; color: #9ca3af;">
          Up to 5 photos per pin (existing + new).
        </small>
      </div>

      <!-- Buttons -->
      <div class="modal-buttons">
        <button type="button" id="closeModal" class="btn-secondary">Cancel</button>
        <button type="submit" class="btn-primary">
          <span class="pin-dot">üìç</span>
          Save pin
        </button>
      </div>
    </form>
  </div>
</div>

